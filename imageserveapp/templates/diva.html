{% extends 'main.html' %}

{% block title %}
    Imageserve - Viewing {{ms_name}}
{% endblock %}

{% block header %}
    <link rel="stylesheet" href="{{ STATIC_URL }}css/diva.min.css" type="text/css" />
    <link rel="stylesheet" href="{{ STATIC_URL }}css/style.css" type="text/css" />

    <script src="{{ STATIC_URL }}js/diva.min.js"></script>

    <script type="text/javascript">
    $(document).ready(function() {
        $('#diva-wrapper').diva({
            enableAutoHeight: true,
            fixedHeightGrid: false,
            iipServerURL: "localhost:8080/fcgi-bin/iipsrv.fcgi?FIF={{image_path}}/",
            divaserveURL: "/divaserve",
            imageDir: "{{ms_name}}",
            // canvasPlugin: {
            //     proxyURL: 'canvas'
            // }
        });
        var dv = $('#diva-wrapper').data('diva');
    });
    </script>
{% endblock %}

{% block wrap %}
    <!-- Button to trigger modal -->
    <div class="row">
	  <div class="span2 offset10">
        <a href="#myModal" role="button" class="btn" data-toggle="modal"
           style="text-align:right">Metadata</a>
      </div>
    </div>
    <!-- Modal -->
    <div id="myModal" class="modal hide fade" tabindex="-1" role="dialog"
         aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
        <h3 id="myModalLabel">Metadata for {{ms_name}}</h3>
      </div>
      <div class="modal-body">
        {{md|safe}}
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" data-dismiss="modal" aria-hidden="true">Close</button>
      </div>
    </div>
    <div id="diva-wrapper"></div>
{% endblock %}